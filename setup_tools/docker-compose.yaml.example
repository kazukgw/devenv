version: '3'

services:
  devenv:
    image: devenv
    container_name: devenv_container
    ports:
      - "8080:8080"
      - "8888:8888"
      - "9000:9000"

    volumes:
      # ssh
      - /Users/developer/devenv/.ssh:/Users/developer/devenv/.ssh
      # src
      - /Users/developer/devenv/src:/Users/developer/devenv/src
      # bin
      - /Users/developer/devenv/bin:/Users/developer/devenv/bin
      # pkg
      - /Users/developer/devenv/pkg:/Users/developer/devenv/pkg
      # nvim
      - /Users/developer/devenv/.config/nvim/plugged:/Users/developer/devenv/.config/nvim/plugged
      # nvim coc settings
      - /Users/developer/devenv/.config/nvim/coc-settings.json:/Users/developer/devenv/.config/nvim/coc-settings.json
      # coc.nvim extension
      - /Users/kazukgw/devenv/.config/coc:/Users/kazukgw/devenv/.config/coc
      # pip pacakges
      - /Users/developer/devenv/.local:/Users/developer/devenv/.local
      # share
      - /Users/developer/devenv/tmp:/Users/developer/devenv/tmp
      # .gsutil
      - /Users/developer/devenv/.gsutil:/Users/developer/devenv/.gsutil
      # .gcloud
      - /Users/developer/devenv/.config/gcloud:/Users/developer/devenv/.config/gcloud
      # devenv_profile
      - /Users/developer/devenv/.config/devenv_profile:/Users/developer/devenv/.config/devenv_profile
      # lemonade config
      - /Users/developer/devenv/.config/lemonade.toml:/Users/developer/devenv/.config/lemonade.toml

      # n(node)
      # config/gcloud
      # timezone
      # - /etc/localtime:/etc/localtime:ro

    environment:
      # http_proxy: xxxx
      # https_proxy: xxxx
      GIT_EMAIL: developer@xxxxmail.com
      GIT_NAME: developer
      GITHUB_USER: developer
      GO111MODULE: "on"
      DOCKER_HOST: tcp://docker.for.mac.host.internal:1234

    command: /bin/bash
    # command: ttyd -p 8080 tmux new -A -s devenv
    tty: true
    stdin_open: true

    # restart: always

    security_opt:
      - seccomp:unconfined
